<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Game Plan 11B – Season 25-26</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="main-header">
    <img src="images/CUP10.PNG" alt="Team Logo" class="logo" />
    <h1>Game Plan 11B – Season 25-26</h1>
  </header>
  <section id="calendar"></section>
  <script>
    // Load games and meta info, then render
    Promise.all([
      fetch('games.json').then(r => r.json()),
      fetch('game_meta.json').then(r => r.json())
    ]).then(([games, meta]) => {
      // Build a lookup for meta info
      const metaMap = {};
      meta.forEach(m => metaMap[m.id] = m);

      // Group games by month
      const months = {};
      games.forEach(game => {
        const month = new Date(game.date).toLocaleString('default', { month: 'long', year: 'numeric' });
        if (!months[month]) months[month] = [];
        months[month].push(game);
      });

      // Render
      const calendar = document.getElementById('calendar');
      calendar.innerHTML = Object.entries(months).map(([month, games]) => `
        <h2 class="month-header">${month}</h2>
        <div class="game-grid">
          ${games.map(game => {
            const m = metaMap[game.id] || {};
            return `
              <div class="game-card">
                <div class="game-date">${game.date}</div>
                <h2>${game.opponent ? 'vs ' + game.opponent : ''}</h2>
                <div>${game.competition || ''}</div>
                <div class="game-meta">
                  <span class="formation">${m.formation || ''}</span>
                  <span class="score">${m.score || ''}</span>
                </div>
                <a href="game.html?id=${game.id}" class="view-link">View Plan</a>
              </div>
            `;
          }).join('')}
        </div>
      `).join('');
    });
  </script>
</body>
</html>
